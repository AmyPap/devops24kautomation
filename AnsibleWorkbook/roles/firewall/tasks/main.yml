---
# tasks file for roles/firewall
- name: Show firewall services to be applied
  debug:
    var: firewall_services

- name: Ensure firewalld and dependencies are installed
  ansible.builtin.package:
    name:
      - firewalld
      - python3-firewall
    state: present

- name: Enable and start firewalld
  ansible.builtin.service:
    name: firewalld
    state: started
    enabled: true

- name: Open firewall services  based on host group
  ansible.posix.firewalld:
    service: "{{ item }}"
    zone: public
    permanent: true
    state: enabled
    immediate: true
  loop: "{{ firewall_services }}"


